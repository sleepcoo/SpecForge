import{k as d,l as u,m as e,F as x,r as S,p as g,c as w,q as C,u as P,v as F,x as z,y as q,z as B,w as U,o as W,A as E,B as H}from"./vue-vendor-BiFzoH3S.js";import{u as R,s as V,i as K,a as G,b as J,c as Z,d as Q,e as X,f as Y,g as ee}from"./echarts-vendor-CmbFP-ng.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const p of n)if(p.type==="childList")for(const v of p.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&a(v)}).observe(document,{childList:!0,subtree:!0});function r(n){const p={};return n.integrity&&(p.integrity=n.integrity),n.referrerPolicy&&(p.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?p.credentials="include":n.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function a(n){if(n.ep)return;n.ep=!0;const p=r(n);fetch(n.href,p)}})();const te=""+new URL("../logo.png",import.meta.url).href,N=(c,o)=>{const r=c.__vccOpts||c;for(const[a,n]of o)r[a]=n;return r},ae={class:"filter-controls"},se={class:"filter-grid"},le={class:"filter-item"},re={class:"select-wrapper"},ne=["value"],oe=["value"],ie={class:"filter-item"},ce={class:"select-wrapper"},de=["value"],ue=["value"],pe={class:"filter-item"},fe={class:"select-wrapper"},he=["value"],me=["value"],ge={class:"filter-item"},ve={class:"select-wrapper"},ye=["value"],be=["value"],_e={__name:"FilterControls",props:{modelFamilies:{type:Array,required:!0},selectedFamily:{type:String,required:!0},targetModels:{type:Array,default:()=>[]},selectedTargetModel:{type:String,default:"all"},benchmarks:{type:Array,required:!0},selectedBenchmark:{type:String,required:!0},metrics:{type:Array,required:!0},selectedMetric:{type:String,required:!0}},emits:["update:family","update:targetModel","update:benchmark","update:metric"],setup(c){return(o,r)=>(u(),d("div",ae,[e("div",se,[e("div",le,[r[5]||(r[5]=e("label",{for:"modelFamily"},"Model Family",-1)),e("div",re,[e("select",{id:"modelFamily",value:c.selectedFamily,onChange:r[0]||(r[0]=a=>o.$emit("update:family",a.target.value))},[(u(!0),d(x,null,S(c.modelFamilies,a=>(u(),d("option",{key:a,value:a},g(a),9,oe))),128))],40,ne),r[4]||(r[4]=e("div",{class:"select-arrow"},[e("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1))])]),e("div",ie,[r[7]||(r[7]=e("label",{for:"targetModel"},"Target Model",-1)),e("div",ce,[e("select",{id:"targetModel",value:c.selectedTargetModel,onChange:r[1]||(r[1]=a=>o.$emit("update:targetModel",a.target.value))},[(u(!0),d(x,null,S(c.targetModels,a=>(u(),d("option",{key:a,value:a},g(a),9,ue))),128))],40,de),r[6]||(r[6]=e("div",{class:"select-arrow"},[e("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1))])]),e("div",pe,[r[10]||(r[10]=e("label",{for:"benchmark"},"Benchmark",-1)),e("div",fe,[e("select",{id:"benchmark",value:c.selectedBenchmark,onChange:r[2]||(r[2]=a=>o.$emit("update:benchmark",a.target.value))},[r[8]||(r[8]=e("option",{value:"all"},"All Benchmarks",-1)),(u(!0),d(x,null,S(c.benchmarks,a=>(u(),d("option",{key:a,value:a},g(a),9,me))),128))],40,he),r[9]||(r[9]=e("div",{class:"select-arrow"},[e("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1))])]),e("div",ge,[r[12]||(r[12]=e("label",{for:"metric"},"Metric",-1)),e("div",ve,[e("select",{id:"metric",value:c.selectedMetric,onChange:r[3]||(r[3]=a=>o.$emit("update:metric",a.target.value))},[(u(!0),d(x,null,S(c.metrics,a=>(u(),d("option",{key:a.value,value:a.value},g(a.label),9,be))),128))],40,ye),r[11]||(r[11]=e("div",{class:"select-arrow"},[e("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1))])])])]))}},ke=N(_e,[["__scopeId","data-v-55230806"]]),Me={class:"chart-wrapper"},$e={__name:"BenchmarkChart",props:{data:{type:Array,required:!0},benchmark:{type:String,default:"MTBench"},metric:{type:String,default:"throughput"},modelFamily:{type:String,default:""}},setup(c){R([K,G,J,Z,Q,X,Y,ee]);const o=c,r=w(()=>{const a=o.benchmark==="all",n=a?["gsm8k","math500","mtbench","humaneval","livecodebench","financeqa","gpqa"]:[o.benchmark],p=o.metric==="accLen"?"accLen":"throughput",v=o.metric==="accLen"?"Acceptance Length":"Throughput (tokens/s)",b=o.metric==="speedup",_=o.data.filter(i=>n.some(m=>i.metrics[m]&&i.metrics[m][p]!=null)),M=[...new Set(_.map(i=>i.parallelConfig).filter(i=>i&&i!=="-"&&i!==null))],k=M.length>0?` (${M.join(", ")})`:"",l=[];let s=[];const t=i=>{const m=i?i.toLowerCase():"";return m.includes("specbundle")?{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#4f46e5"},{offset:1,color:"#4338ca"}]}:m.includes("eagle")?"#10b981":m==="-"||m==="none"||m.includes("baseline")?"#94a3b8":"#f59e0b"},f=i=>{if(i.draftModel==="-"||i.draftModel==="None"||i.draftModel.toLowerCase().includes("baseline"))return"Baseline (No Draft Model)";const y=i.draftModel.split("/").pop(),$=i.config==="0-0-0"||!i.config||i.config==="-"?"":i.config;return $?`${y}
(${$})`:y};if(a){s=n;const i=["#06b6d4","#8b5cf6","#ec4899","#f59e0b","#14b8a6","#f43f5e","#3b82f6","#84cc16"];let m=0;_.forEach(y=>{const $=f(y).replace(/\n/g," "),L=y.draftModel?y.draftModel.toLowerCase():"",I=L==="-"||L==="none"||L.includes("baseline");let A;L.includes("specbundle")?A={type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#4f46e5"},{offset:1,color:"#4338ca"}]}:I?A="#94a3b8":(A=i[m%i.length],m++);const j=n.map(T=>{const D=y.metrics[T]?.[p];if(D==null)return 0;if(b){const O=y.baseline&&y.baseline[T]?y.baseline[T][p]:null;return O?parseFloat((D/O).toFixed(2)):0}return D});l.push({name:$,type:"bar",data:j,itemStyle:{borderRadius:[4,4,0,0],color:A},label:{show:!0,position:"top",fontSize:9,formatter:"{c}",distance:2}})})}else{s=_.map(f);const i=_.map(m=>{const y=m.metrics[n[0]][p];if(b){const $=m.baseline&&m.baseline[n[0]]?m.baseline[n[0]][p]:null;return $?parseFloat((y/$).toFixed(2)):0}return y});l.push({name:b?"Speedup":v,type:"bar",data:i,barMaxWidth:60,itemStyle:{borderRadius:[6,6,0,0],color:function(m){const y=m.dataIndex;return t(_[y].draftModel)}},label:{show:s.length<=15,position:"top",formatter:"{c}",fontSize:10,color:"#64748b"}})}const h=a?`Hardware: H200 ${k} | Metric: Throughput (tokens/s)`:`${n[0]} Performance`;return{textStyle:{fontFamily:"Inter, sans-serif"},title:{text:h,left:"left",textStyle:{fontSize:16,fontWeight:600,color:"#1e293b"}},tooltip:{trigger:"axis",backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#e2e8f0",textStyle:{color:"#334155",fontSize:12},axisPointer:{type:"shadow"}},legend:{show:a,bottom:0,left:"center",width:"90%",itemGap:15,textStyle:{fontSize:11},data:a?l.map(i=>i.name):[]},grid:{left:0,right:10,bottom:100,top:60,containLabel:!0},xAxis:{type:"category",data:s,axisLine:{lineStyle:{color:"#e2e8f0"}},axisTick:{show:!1},axisLabel:{interval:0,rotate:a?0:30,fontSize:10,color:"#64748b"}},yAxis:{type:"value",name:b?"x Baseline":"",nameTextStyle:{align:"right",color:"#94a3b8"},splitLine:{lineStyle:{type:"dashed",color:"#f1f5f9"}},axisLabel:{color:"#64748b",fontSize:11}},dataZoom:[{type:"slider",show:!a&&s.length>8,start:0,end:a?100:Math.min(100,8/s.length*100),bottom:0,height:16,borderColor:"transparent",backgroundColor:"#f8fafc",fillerColor:"rgba(79, 70, 229, 0.1)",handleSize:"100%",handleStyle:{color:"#818cf8"}},{type:"inside",start:0,end:100,zoomOnMouseWheel:!1,moveOnMouseMove:!0,moveOnMouseWheel:!0}],series:l}});return(a,n)=>(u(),d("div",Me,[C(P(V),{option:r.value,autoresize:!0,style:{height:"100%",width:"100%"}},null,8,["option"])]))}},xe=N($e,[["__scopeId","data-v-4f8113c5"]]),Se={class:"table-container"},Be={class:"table-scroll"},we={key:0},Fe={class:"th-content"},Ce={key:1},Le={class:"model-name sticky-col"},Ae={class:"draft-model-cell"},Ne={class:"config-cell"},Te={key:0,class:"hardware-cell"},De={key:0,class:"metric-content"},qe={class:"metric-pair"},Oe={class:"val-acc"},ze={class:"val-thru"},Ee={key:0,class:"speedup-indicator"},Ie={key:1,class:"no-data"},je={key:1,class:"avg-speedup"},Pe={class:"speedup-tag primary"},Ue={__name:"BenchmarkTable",props:{data:{type:Array,required:!0},benchmarks:{type:Array,required:!0},selectedBenchmark:{type:String,default:"all"},highlightMetric:{type:String,default:"throughput"}},setup(c){const o=c,r=w(()=>o.selectedBenchmark==="all"?o.benchmarks:[o.selectedBenchmark]),a=w(()=>o.data.some(l=>l.hardware&&l.hardware!=="-"));function n(l){return l?l==="-"||l==="None"?"Baseline":l.includes("SpecBundle")?"SpecBundle":l.split("/").pop()||l:"-"}function p(l){return!l||l==="-"||l==="None"?"badge-baseline":l.includes("SpecBundle")?"badge-spec":l.toLowerCase().includes("eagle")?"badge-eagle":"badge-default"}function v(l){return l==null?"-":Number.isInteger(l)?l:typeof l=="number"?l.toFixed(2):l}function b(l,s){return!l||!s||s===0?"-":(l/s).toFixed(2)}function _(l,s){if(!l||!s)return"";const t=l/s;return t>=2?"excellent":t>=1.5?"good":t>=1.1?"moderate":"neutral"}function M(l){let s=0,t=0;return l.baseline?(o.benchmarks.forEach(f=>{const h=l.metrics[f]?.throughput,i=l.baseline[f]?.throughput;h&&i&&i>0&&(s+=h/i,t++)}),t>0?(s/t).toFixed(2):"-"):"-"}function k(l,s){return!1}return(l,s)=>(u(),d("div",Se,[e("div",Be,[e("table",null,[e("thead",null,[e("tr",null,[s[1]||(s[1]=e("th",{class:"sticky-col"},"Target Model",-1)),s[2]||(s[2]=e("th",null,"Draft Model",-1)),s[3]||(s[3]=e("th",null,"Config",-1)),a.value?(u(),d("th",we,"Hardware")):F("",!0),(u(!0),d(x,null,S(r.value,t=>(u(),d("th",{key:t,class:"metric-header"},[e("div",Fe,[z(g(t)+" ",1),s[0]||(s[0]=e("span",{class:"th-subtitle"},"Acc Len / Tokens/s",-1))])]))),128)),c.highlightMetric==="speedup"?(u(),d("th",Ce,"Avg Speedup")):F("",!0)])]),e("tbody",null,[(u(!0),d(x,null,S(c.data,(t,f)=>(u(),d("tr",{key:f},[e("td",Le,[z(g(t.targetModel)+" ",1),s[4]||(s[4]=e("div",{class:"mobile-label"},"Target",-1))]),e("td",Ae,[e("span",{class:q(["component-badge",p(t.draftModel)])},g(n(t.draftModel)),3)]),e("td",Ne,g(t.config),1),a.value?(u(),d("td",Te,g(t.hardware),1)):F("",!0),(u(!0),d(x,null,S(r.value,h=>(u(),d("td",{key:h,class:q(["metric-cell-wrapper",{"highlight-bg":k()}])},[t.metrics[h]?(u(),d("div",De,[e("div",qe,[e("span",Oe,g(v(t.metrics[h].accLen)),1),s[5]||(s[5]=e("span",{class:"separator"},"/",-1)),e("span",ze,g(v(t.metrics[h].throughput)),1)]),t.baseline&&t.baseline[h]?(u(),d("div",Ee,[e("span",{class:q(["speedup-tag",_(t.metrics[h].throughput,t.baseline[h].throughput)])},g(b(t.metrics[h].throughput,t.baseline[h].throughput))+"x ",3)])):F("",!0)])):(u(),d("div",Ie,"-"))],2))),128)),c.highlightMetric==="speedup"?(u(),d("td",je,[e("span",Pe,g(M(t))+"x ",1)])):F("",!0)]))),128))])])])]))}},We=N(Ue,[["__scopeId","data-v-7dc94a1f"]]);async function He(){try{return await(await fetch("./raw_data/data.json")).json()}catch(c){return console.error("Error loading JSON data:",c),{}}}function Re(c){if(!c)return[];const o=new Map;return Object.entries(c).forEach(([,r])=>{const a=r.benchmark_name;(r.results||[]).forEach(p=>{const{batch_size:v,steps:b,topk:_,num_draft_tokens:M,metrics:k}=p,l=k.find(s=>s.Name==="Wihtout EAGLE3");k.forEach(s=>{const t=s.Name==="Wihtout EAGLE3",f=t?"baseline":`${v}-${b}-${_}-${M}`,h=`${s.Name}|${f}`;o.has(h)||o.set(h,{targetModel:s.Name,draftModel:t?"None":s.Name,config:f,batch_size:v,steps:b,topk:_,num_draft_tokens:M,metrics:{},baseline:{}});const i=o.get(h);i.metrics[a]={throughput:s.output_throughput,accLen:s.accept_length},l&&(i.baseline[a]={throughput:l.output_throughput,accLen:l.accept_length})})})}),Array.from(o.values())}function Ve(c){return Object.keys(c)}function Ke(c){return[...new Set(c.map(o=>o.targetModel).filter(Boolean))]}const Ge={class:"benchmark-app"},Je={class:"main-container"},Ze={class:"dashboard-controls"},Qe={key:0,class:"state-container"},Xe={key:1,class:"content-wrapper"},Ye={class:"stats-overview"},et={class:"stat-card"},tt={class:"stat-value"},at={class:"stat-card"},st={class:"stat-value"},lt={class:"stat-card"},rt={class:"stat-value"},nt={class:"chart-section"},ot={class:"chart-container"},it={class:"table-section"},ct={key:2,class:"state-container empty"},dt={__name:"BenchmarkDashboard",setup(c){const o=B(!0),r=B({}),a=B("Kimi-K2-Instruct"),n=B("all"),p=B("all"),v=B("throughput"),b=["gsm8k","math500","mtbench","humaneval","livecodebench","financeqa","gpqa"],_=[{value:"throughput",label:"Throughput (tokens/s)"},{value:"accLen",label:"Acceptance Length"},{value:"speedup",label:"Speedup vs Baseline"}],M=w(()=>Ve(r.value)),k=w(()=>{const s=r.value[a.value]||[];return Ke(s)}),l=w(()=>{const s=r.value[a.value]||[];return n.value&&n.value!=="all"?s.filter(t=>t.targetModel===n.value):s});return U([a,k],([s,t])=>{t&&t.length>0?t.includes(n.value)||(n.value=t[0]):n.value="all"},{immediate:!0}),W(async()=>{try{const s=await He();for(const[f,h]of Object.entries(s))r.value[f]=Re(h);const t=Object.keys(r.value);t.length>0&&!t.includes(a.value)&&(a.value=t[0]),o.value=!1}catch(s){console.error("Error loading data:",s),o.value=!1}}),(s,t)=>(u(),d("div",Ge,[e("div",Je,[t[11]||(t[11]=E('<header class="header" data-v-e15c9a30><div class="header-content" data-v-e15c9a30><div class="brand" data-v-e15c9a30><div class="logo-icon" data-v-e15c9a30><img src="'+te+'" alt="SpecForge Logo" style="width:100%;height:100%;object-fit:contain;" data-v-e15c9a30></div></div><h1 data-v-e15c9a30>SpecBundle</h1></div></header>',1)),e("div",Ze,[C(ke,{modelFamilies:M.value,selectedFamily:a.value,targetModels:k.value,selectedTargetModel:n.value,benchmarks:b,selectedBenchmark:p.value,metrics:_,selectedMetric:v.value,"onUpdate:family":t[0]||(t[0]=f=>a.value=f),"onUpdate:targetModel":t[1]||(t[1]=f=>n.value=f),"onUpdate:benchmark":t[2]||(t[2]=f=>p.value=f),"onUpdate:metric":t[3]||(t[3]=f=>v.value=f)},null,8,["modelFamilies","selectedFamily","targetModels","selectedTargetModel","selectedBenchmark","selectedMetric"])]),o.value?(u(),d("div",Qe,[...t[4]||(t[4]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading benchmark data...",-1)])])):l.value.length>0?(u(),d("div",Xe,[e("div",Ye,[e("div",et,[t[5]||(t[5]=e("span",{class:"stat-label"},"Model Family",-1)),e("span",tt,g(a.value),1)]),e("div",at,[t[6]||(t[6]=e("span",{class:"stat-label"},"Target Models",-1)),e("span",st,g(k.value.length),1)]),e("div",lt,[t[7]||(t[7]=e("span",{class:"stat-label"},"Configurations",-1)),e("span",rt,g(l.value.length),1)])]),e("div",nt,[t[8]||(t[8]=e("h3",null,"Performance Visualization",-1)),e("div",ot,[C(xe,{data:l.value,benchmark:p.value,metric:v.value,modelFamily:a.value},null,8,["data","benchmark","metric","modelFamily"])])]),e("div",it,[t[9]||(t[9]=e("div",{class:"section-header"},[e("h3",null,"Detailed Results"),e("div",{class:"export-actions"})],-1)),C(We,{data:l.value,benchmarks:b,selectedBenchmark:p.value,highlightMetric:v.value},null,8,["data","selectedBenchmark","highlightMetric"])])])):(u(),d("div",ct,[t[10]||(t[10]=E('<div class="empty-icon" data-v-e15c9a30><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-e15c9a30><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-e15c9a30></path><polyline points="14 2 14 8 20 8" data-v-e15c9a30></polyline><line x1="16" y1="13" x2="8" y2="13" data-v-e15c9a30></line><line x1="16" y1="17" x2="8" y2="17" data-v-e15c9a30></line><polyline points="10 9 9 9 8 9" data-v-e15c9a30></polyline></svg></div><h3 data-v-e15c9a30>No Data Available</h3>',2)),e("p",null,"No benchmark data found for "+g(a.value),1)]))]),t[12]||(t[12]=e("footer",{class:"footer"},[e("p",null,"Powered by SpecForge Team")],-1))]))}},ut=N(dt,[["__scopeId","data-v-e15c9a30"]]),pt={id:"app"},ft={__name:"App",setup(c){return(o,r)=>(u(),d("div",pt,[C(ut)]))}};H(ft).mount("#app");
