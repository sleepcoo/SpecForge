import{k as u,l as p,m as e,F as w,r as B,p as g,c as C,q as F,u as G,v as D,x as q,y as O,z as L,w as H,o as V,A as j,B as W}from"./vue-vendor-BiFzoH3S.js";import{u as R,s as U,i as K,a as J,b as Z,c as Q,d as X,e as Y,f as ee,g as te}from"./echarts-vendor-CmbFP-ng.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const f of i)if(f.type==="childList")for(const v of f.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&s(v)}).observe(document,{childList:!0,subtree:!0});function r(i){const f={};return i.integrity&&(f.integrity=i.integrity),i.referrerPolicy&&(f.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?f.credentials="include":i.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(i){if(i.ep)return;i.ep=!0;const f=r(i);fetch(i.href,f)}})();const ae=""+new URL("../specbundle-logo.png",import.meta.url).href,E=(d,o)=>{const r=d.__vccOpts||d;for(const[s,i]of o)r[s]=i;return r},se={class:"filter-controls"},re={class:"filter-grid"},oe={class:"filter-item"},le={class:"select-wrapper"},ne=["value"],ie=["value"],de={class:"filter-item"},ce={class:"select-wrapper"},ue=["value"],pe=["value"],fe={class:"filter-item"},he={class:"select-wrapper"},ge=["value"],ve=["value"],me={class:"filter-item"},be={class:"select-wrapper"},ye=["value"],Me=["value"],ke={__name:"FilterControls",props:{targetModels:{type:Array,required:!0},selectedTargetModel:{type:String,default:"all"},draftModels:{type:Array,default:()=>[]},selectedDraftModel:{type:String,default:"all"},benchmarks:{type:Array,required:!0},selectedBenchmark:{type:String,required:!0},metrics:{type:Array,required:!0},selectedMetric:{type:String,required:!0}},emits:["update:targetModel","update:draftModel","update:benchmark","update:metric"],setup(d){return(o,r)=>(p(),u("div",se,[e("div",re,[e("div",oe,[r[5]||(r[5]=e("label",{for:"targetModel"},"Target Model",-1)),e("div",le,[e("select",{id:"targetModel",value:d.selectedTargetModel,onChange:r[0]||(r[0]=s=>o.$emit("update:targetModel",s.target.value))},[(p(!0),u(w,null,B(d.targetModels,s=>(p(),u("option",{key:s,value:s},g(s),9,ie))),128))],40,ne),r[4]||(r[4]=e("div",{class:"select-arrow"},[e("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1))])]),e("div",de,[r[8]||(r[8]=e("label",{for:"draftModel"},"Draft Model",-1)),e("div",ce,[e("select",{id:"draftModel",value:d.selectedDraftModel,onChange:r[1]||(r[1]=s=>o.$emit("update:draftModel",s.target.value))},[r[6]||(r[6]=e("option",{value:"all"},"All Draft Models",-1)),(p(!0),u(w,null,B(d.draftModels,s=>(p(),u("option",{key:s,value:s},g(s==="None"?"Baseline (No Draft)":s),9,pe))),128))],40,ue),r[7]||(r[7]=e("div",{class:"select-arrow"},[e("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1))])]),e("div",fe,[r[11]||(r[11]=e("label",{for:"benchmark"},"Benchmark",-1)),e("div",he,[e("select",{id:"benchmark",value:d.selectedBenchmark,onChange:r[2]||(r[2]=s=>o.$emit("update:benchmark",s.target.value))},[r[9]||(r[9]=e("option",{value:"all"},"All Benchmarks",-1)),(p(!0),u(w,null,B(d.benchmarks,s=>(p(),u("option",{key:s,value:s},g(s),9,ve))),128))],40,ge),r[10]||(r[10]=e("div",{class:"select-arrow"},[e("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1))])]),e("div",me,[r[13]||(r[13]=e("label",{for:"metric"},"Metric",-1)),e("div",be,[e("select",{id:"metric",value:d.selectedMetric,onChange:r[3]||(r[3]=s=>o.$emit("update:metric",s.target.value))},[(p(!0),u(w,null,B(d.metrics,s=>(p(),u("option",{key:s.value,value:s.value},g(s.label),9,Me))),128))],40,ye),r[12]||(r[12]=e("div",{class:"select-arrow"},[e("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1))])])])]))}},_e=E(ke,[["__scopeId","data-v-e4327321"]]);async function $e(){try{return await(await fetch("./raw_data/data.json")).json()}catch(d){return console.error("Error loading JSON data:",d),{}}}function xe(d,o){if(!d||!o)return[];const r=new Map;return Object.entries(d).forEach(([,s])=>{const i=s.benchmark_name;(s.results||[]).forEach(v=>{const{batch_size:b,steps:y,topk:_,num_draft_tokens:k,metrics:m}=v,a=m.find(t=>t.Name==="Wihtout EAGLE3");m.forEach(t=>{const l=t.Name==="Wihtout EAGLE3",M=l?"baseline":`${b}-${y}-${_}-${k}`,n=l?"None":t.Name,c=`${n}|${M}`;r.has(c)||r.set(c,{targetModel:o,draftModel:n,config:M,batch_size:b,steps:y,topk:_,num_draft_tokens:k,metrics:{},baseline:{}});const h=r.get(c);h.metrics[i]={throughput:t.output_throughput,accLen:t.accept_length},a&&(h.baseline[i]={throughput:a.output_throughput,accLen:a.accept_length})})})}),Array.from(r.values())}function Se(d){return Object.keys(d)}function N(d){if(!d)return d;let o=String(d);return o=o.replace(/(^|\/)SGLang-EAGLE3-/gi,"$1"),o=o.replace(/(^|\/)SGLang-EAGLE3\//gi,"$1"),o=o.replace(/^SGLang-EAGLE3(?![-\/])/gi,""),o=o.replace(/\/+/g,"/"),o.length>1&&(o=o.replace(/^\//,"")),o||d}const we={class:"chart-wrapper"},Be={__name:"BenchmarkChart",props:{data:{type:Array,required:!0},benchmark:{type:String,default:"MTBench"},metric:{type:String,default:"throughput"}},setup(d){R([K,J,Z,Q,X,Y,ee,te]);const o=d,r=C(()=>{const s=o.benchmark==="all",i=s?["gsm8k","math500","mtbench","humaneval","livecodebench","financeqa","gpqa"]:[o.benchmark],f=o.metric==="accLen"?"accLen":"throughput",v=o.metric==="accLen"?"Acceptance Length":"Throughput (tokens/s)",b=o.metric==="speedup",y=o.data.filter(n=>i.some(c=>n.metrics[c]&&n.metrics[c][f]!=null)),_=[...new Set(y.map(n=>n.parallelConfig).filter(n=>n&&n!=="-"&&n!==null))],k=_.length>0?` (${_.join(", ")})`:"",m=[];let a=[];const t=n=>{const c=n?n.toLowerCase():"";return c.includes("specbundle")?{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#4f46e5"},{offset:1,color:"#4338ca"}]}:c.includes("eagle")?"#10b981":c==="-"||c==="none"||c.includes("baseline")?"#94a3b8":"#f59e0b"},l=n=>{if(n.draftModel==="-"||n.draftModel==="None"||n.draftModel.toLowerCase().includes("baseline"))return"Baseline (No Draft Model)";const x=N(n.draftModel).split("/").pop(),S=n.config==="0-0-0"||!n.config||n.config==="-"?"":n.config;return S?`${x}
(${S})`:x};if(s){a=i;const n=["#06b6d4","#8b5cf6","#ec4899","#f59e0b","#14b8a6","#f43f5e","#3b82f6","#84cc16"];let c=0;y.forEach(h=>{const x=l(h).replace(/\n/g," "),S=h.draftModel?h.draftModel.toLowerCase():"",I=S==="-"||S==="none"||S.includes("baseline");let T;S.includes("specbundle")?T={type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#4f46e5"},{offset:1,color:"#4338ca"}]}:I?T="#94a3b8":(T=n[c%n.length],c++);const P=i.map(A=>{const $=h.metrics[A]?.[f];if($==null)return 0;if(b){const z=h.baseline&&h.baseline[A]?h.baseline[A][f]:null;return z?parseFloat(($/z).toFixed(2)):0}return typeof $=="number"?parseFloat($.toFixed(2)):$});m.push({name:x,type:"bar",data:P,itemStyle:{borderRadius:[4,4,0,0],color:T},label:{show:!0,position:"top",fontSize:9,formatter:A=>{const $=A.value;return typeof $=="number"?$.toFixed(2):$},distance:2}})})}else{a=y.map(l);const n=y.map(c=>{const h=c.metrics[i[0]][f];if(b){const x=c.baseline&&c.baseline[i[0]]?c.baseline[i[0]][f]:null;return x?parseFloat((h/x).toFixed(2)):0}return typeof h=="number"?parseFloat(h.toFixed(2)):h});m.push({name:b?"Speedup":v,type:"bar",data:n,barMaxWidth:60,itemStyle:{borderRadius:[6,6,0,0],color:function(c){const h=c.dataIndex;return t(y[h].draftModel)}},label:{show:a.length<=15,position:"top",formatter:c=>{const h=c.value;return typeof h=="number"?h.toFixed(2):h},fontSize:10,color:"#64748b"}})}const M=s?`Hardware: H200 ${k} | Metric: Throughput (tokens/s)`:`${i[0]} Performance`;return{textStyle:{fontFamily:"Inter, sans-serif"},title:{text:M,left:"left",textStyle:{fontSize:16,fontWeight:600,color:"#1e293b"}},tooltip:{trigger:"axis",backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#e2e8f0",textStyle:{color:"#334155",fontSize:12},axisPointer:{type:"shadow"}},legend:{show:s,bottom:0,left:"center",width:"90%",itemGap:15,textStyle:{fontSize:11},data:s?m.map(n=>n.name):[]},grid:{left:0,right:10,bottom:100,top:60,containLabel:!0},xAxis:{type:"category",data:a,axisLine:{lineStyle:{color:"#e2e8f0"}},axisTick:{show:!1},axisLabel:{interval:0,rotate:s?0:30,fontSize:10,color:"#64748b"}},yAxis:{type:"value",name:b?"x Baseline":"",nameTextStyle:{align:"right",color:"#94a3b8"},splitLine:{lineStyle:{type:"dashed",color:"#f1f5f9"}},axisLabel:{color:"#64748b",fontSize:11}},dataZoom:[{type:"slider",show:!s&&a.length>8,start:0,end:s?100:Math.min(100,8/a.length*100),bottom:0,height:16,borderColor:"transparent",backgroundColor:"#f8fafc",fillerColor:"rgba(79, 70, 229, 0.1)",handleSize:"100%",handleStyle:{color:"#818cf8"}},{type:"inside",start:0,end:100,zoomOnMouseWheel:!1,moveOnMouseMove:!0,moveOnMouseWheel:!0}],series:m}});return(s,i)=>(p(),u("div",we,[F(G(U),{option:r.value,autoresize:!0,style:{height:"100%",width:"100%"}},null,8,["option"])]))}},Le=E(Be,[["__scopeId","data-v-494be114"]]),Ce={class:"table-container"},Ae={class:"table-scroll"},De={key:0},Fe={class:"th-content"},Te={key:1},Ne={class:"model-name sticky-col"},Ee={class:"draft-model-cell"},Oe={class:"config-cell"},ze={key:0,class:"hardware-cell"},qe={key:0,class:"metric-content"},je={class:"metric-pair"},Ge={class:"val-acc"},Ie={class:"val-thru"},Pe={key:0,class:"speedup-indicator"},He={key:1,class:"no-data"},Ve={key:1,class:"avg-speedup"},We={class:"speedup-tag primary"},Re={__name:"BenchmarkTable",props:{data:{type:Array,required:!0},benchmarks:{type:Array,required:!0},selectedBenchmark:{type:String,default:"all"},highlightMetric:{type:String,default:"throughput"}},setup(d){const o=d,r=C(()=>o.selectedBenchmark==="all"?o.benchmarks:[o.selectedBenchmark]),s=C(()=>o.data.some(a=>a.hardware&&a.hardware!=="-"));function i(a){if(!a)return"-";const t=N(a);return t.split("/").pop()||t}function f(a){if(!a)return"-";if(a==="-"||a==="None")return"Baseline";if(a.includes("SpecBundle"))return"SpecBundle";const t=N(a);return t.split("/").pop()||t}function v(a){return!a||a==="-"||a==="None"?"badge-baseline":a.includes("SpecBundle")?"badge-spec":a.toLowerCase().includes("eagle")?"badge-eagle":"badge-default"}function b(a){return a==null?"-":typeof a=="number"?a.toFixed(2):a}function y(a,t){return!a||!t||t===0?"-":(a/t).toFixed(2)}function _(a,t){if(!a||!t)return"";const l=a/t;return l>=2?"excellent":l>=1.5?"good":l>=1.1?"moderate":"neutral"}function k(a){let t=0,l=0;return a.baseline?(o.benchmarks.forEach(M=>{const n=a.metrics[M]?.throughput,c=a.baseline[M]?.throughput;n&&c&&c>0&&(t+=n/c,l++)}),l>0?(t/l).toFixed(2):"-"):"-"}function m(a,t){return!1}return(a,t)=>(p(),u("div",Ce,[e("div",Ae,[e("table",null,[e("thead",null,[e("tr",null,[t[1]||(t[1]=e("th",{class:"sticky-col"},"Target Model",-1)),t[2]||(t[2]=e("th",null,"Draft Model",-1)),t[3]||(t[3]=e("th",null,"Config",-1)),s.value?(p(),u("th",De,"Hardware")):D("",!0),(p(!0),u(w,null,B(r.value,l=>(p(),u("th",{key:l,class:"metric-header"},[e("div",Fe,[q(g(l)+" ",1),t[0]||(t[0]=e("span",{class:"th-subtitle"},"Acc Len / Tokens/s",-1))])]))),128)),d.highlightMetric==="speedup"?(p(),u("th",Te,"Avg Speedup")):D("",!0)])]),e("tbody",null,[(p(!0),u(w,null,B(d.data,(l,M)=>(p(),u("tr",{key:M},[e("td",Ne,[q(g(i(l.targetModel))+" ",1),t[4]||(t[4]=e("div",{class:"mobile-label"},"Target",-1))]),e("td",Ee,[e("span",{class:O(["component-badge",v(l.draftModel)])},g(f(l.draftModel)),3)]),e("td",Oe,g(l.config),1),s.value?(p(),u("td",ze,g(l.hardware),1)):D("",!0),(p(!0),u(w,null,B(r.value,n=>(p(),u("td",{key:n,class:O(["metric-cell-wrapper",{"highlight-bg":m()}])},[l.metrics[n]?(p(),u("div",qe,[e("div",je,[e("span",Ge,g(b(l.metrics[n].accLen)),1),t[5]||(t[5]=e("span",{class:"separator"},"/",-1)),e("span",Ie,g(b(l.metrics[n].throughput)),1)]),l.baseline&&l.baseline[n]?(p(),u("div",Pe,[e("span",{class:O(["speedup-tag",_(l.metrics[n].throughput,l.baseline[n].throughput)])},g(y(l.metrics[n].throughput,l.baseline[n].throughput))+"x ",3)])):D("",!0)])):(p(),u("div",He,"-"))],2))),128)),d.highlightMetric==="speedup"?(p(),u("td",Ve,[e("span",We,g(k(l))+"x ",1)])):D("",!0)]))),128))])])])]))}},Ue=E(Re,[["__scopeId","data-v-cae1b8ec"]]),Ke={class:"benchmark-app"},Je={class:"main-container"},Ze={class:"dashboard-controls"},Qe={key:0,class:"state-container"},Xe={key:1,class:"content-wrapper"},Ye={class:"stats-overview"},et={class:"stat-card"},tt={class:"stat-value"},at={class:"stat-card"},st={class:"stat-value"},rt={class:"stat-card"},ot={class:"stat-value"},lt={class:"chart-section"},nt={class:"chart-container"},it={class:"table-section"},dt={key:2,class:"state-container empty"},ct={__name:"BenchmarkDashboard",setup(d){const o=L(!0),r=L({}),s=L(""),i=L("all"),f=L("all"),v=L("throughput"),b=["gsm8k","math500","mtbench","humaneval","livecodebench","financeqa","gpqa"],y=[{value:"throughput",label:"Throughput (tokens/s)"},{value:"accLen",label:"Acceptance Length"},{value:"speedup",label:"Speedup vs Baseline"}],_=C(()=>Se(r.value)),k=C(()=>{if(!s.value)return[];const a=r.value[s.value]||[];return[...new Set(a.map(t=>t.draftModel).filter(Boolean))]}),m=C(()=>{const a=r.value[s.value]||[];return i.value&&i.value!=="all"?a.filter(t=>t.draftModel===i.value):a});return H(s,a=>{a&&(k.value.includes(i.value)||(i.value="all"))}),V(async()=>{try{const a=await $e();for(const[l,M]of Object.entries(a))r.value[l]=xe(M,l);const t=Object.keys(r.value);t.length>0&&(s.value=t[0]),o.value=!1}catch(a){console.error("Error loading data:",a),o.value=!1}}),(a,t)=>(p(),u("div",Ke,[e("div",Je,[t[12]||(t[12]=j('<header class="header" data-v-d6b5e836><a href="https://docs.sglang.io/SpecForge/" class="back-to-docs" data-v-d6b5e836><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d6b5e836><path d="M19 12H5M12 19l-7-7 7-7" data-v-d6b5e836></path></svg><span data-v-d6b5e836>Back to SpecForge Docs</span></a><div class="header-content" data-v-d6b5e836><div class="brand" data-v-d6b5e836><img src="'+ae+'" alt="SpecBundle Logo" class="main-logo" data-v-d6b5e836><div class="powered-by" data-v-d6b5e836> All SpecBundle models are powered by <span class="powered-by-brand" data-v-d6b5e836>SpecForge</span></div><a href="https://huggingface.co/collections/lmsys/specbundle" target="_blank" rel="noopener noreferrer" class="models-link" data-v-d6b5e836><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d6b5e836><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" data-v-d6b5e836></path><polyline points="15 3 21 3 21 9" data-v-d6b5e836></polyline><line x1="10" y1="14" x2="21" y2="3" data-v-d6b5e836></line></svg> View All Models on Hugging Face </a></div></div></header>',1)),e("div",Ze,[F(_e,{targetModels:_.value,selectedTargetModel:s.value,draftModels:k.value,selectedDraftModel:i.value,benchmarks:b,selectedBenchmark:f.value,metrics:y,selectedMetric:v.value,"onUpdate:targetModel":t[0]||(t[0]=l=>s.value=l),"onUpdate:draftModel":t[1]||(t[1]=l=>i.value=l),"onUpdate:benchmark":t[2]||(t[2]=l=>f.value=l),"onUpdate:metric":t[3]||(t[3]=l=>v.value=l)},null,8,["targetModels","selectedTargetModel","draftModels","selectedDraftModel","selectedBenchmark","selectedMetric"])]),o.value?(p(),u("div",Qe,[...t[4]||(t[4]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading benchmark data...",-1)])])):m.value.length>0?(p(),u("div",Xe,[e("div",Ye,[e("div",et,[t[5]||(t[5]=e("span",{class:"stat-label"},"Target Model",-1)),e("span",tt,g(G(N)(s.value)),1)]),e("div",at,[t[6]||(t[6]=e("span",{class:"stat-label"},"Draft Models",-1)),e("span",st,g(k.value.length),1)]),e("div",rt,[t[7]||(t[7]=e("span",{class:"stat-label"},"Configurations",-1)),e("span",ot,g(m.value.length),1)])]),e("div",lt,[t[8]||(t[8]=e("h3",null,"Performance Visualization",-1)),e("div",nt,[F(Le,{data:m.value,benchmark:f.value,metric:v.value},null,8,["data","benchmark","metric"])]),t[9]||(t[9]=e("div",{class:"config-legend"},"Config (batch_size - step - topk - nums_draft_tokens)",-1))]),e("div",it,[t[10]||(t[10]=e("div",{class:"section-header"},[e("h3",null,"Detailed Results"),e("div",{class:"export-actions"})],-1)),F(Ue,{data:m.value,benchmarks:b,selectedBenchmark:f.value,highlightMetric:v.value},null,8,["data","selectedBenchmark","highlightMetric"])])])):(p(),u("div",dt,[t[11]||(t[11]=j('<div class="empty-icon" data-v-d6b5e836><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-d6b5e836><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-d6b5e836></path><polyline points="14 2 14 8 20 8" data-v-d6b5e836></polyline><line x1="16" y1="13" x2="8" y2="13" data-v-d6b5e836></line><line x1="16" y1="17" x2="8" y2="17" data-v-d6b5e836></line><polyline points="10 9 9 9 8 9" data-v-d6b5e836></polyline></svg></div><h3 data-v-d6b5e836>No Data Available</h3>',2)),e("p",null,"No benchmark data found for "+g(s.value),1)]))]),t[13]||(t[13]=e("footer",{class:"footer"},[e("p",null,"Powered by SpecForge Team")],-1))]))}},ut=E(ct,[["__scopeId","data-v-d6b5e836"]]),pt={id:"app"},ft={__name:"App",setup(d){return(o,r)=>(p(),u("div",pt,[F(ut)]))}};W(ft).mount("#app");
