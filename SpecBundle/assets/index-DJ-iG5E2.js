import{k as c,l as u,m as e,F as S,r as w,p as m,c as C,q as A,u as I,v as D,x as q,y as O,z as B,w as P,o as W,A as H,B as R}from"./vue-vendor-BiFzoH3S.js";import{u as U,s as V,i as G,a as K,b as J,c as Z,d as Q,e as X,f as Y,g as ee}from"./echarts-vendor-CmbFP-ng.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const p of o)if(p.type==="childList")for(const b of p.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&s(b)}).observe(document,{childList:!0,subtree:!0});function a(o){const p={};return o.integrity&&(p.integrity=o.integrity),o.referrerPolicy&&(p.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?p.credentials="include":o.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function s(o){if(o.ep)return;o.ep=!0;const p=a(o);fetch(o.href,p)}})();const te=""+new URL("../spec_bundle_logo.jpg",import.meta.url).href,F=(d,i)=>{const a=d.__vccOpts||d;for(const[s,o]of i)a[s]=o;return a},se={class:"filter-controls"},ae={class:"filter-grid"},le={class:"filter-item"},re={class:"select-wrapper"},oe=["value"],ne=["value"],ie={class:"filter-item"},de={class:"select-wrapper"},ce=["value"],ue=["value"],pe={class:"filter-item"},fe={class:"select-wrapper"},he=["value"],ve=["value"],ge={class:"filter-item"},me={class:"select-wrapper"},be=["value"],ye=["value"],Me={__name:"FilterControls",props:{targetModels:{type:Array,required:!0},selectedTargetModel:{type:String,default:"all"},draftModels:{type:Array,default:()=>[]},selectedDraftModel:{type:String,default:"all"},benchmarks:{type:Array,required:!0},selectedBenchmark:{type:String,required:!0},metrics:{type:Array,required:!0},selectedMetric:{type:String,required:!0}},emits:["update:targetModel","update:draftModel","update:benchmark","update:metric"],setup(d){return(i,a)=>(u(),c("div",se,[e("div",ae,[e("div",le,[a[6]||(a[6]=e("label",{for:"targetModel"},"Target Model",-1)),e("div",re,[e("select",{id:"targetModel",value:d.selectedTargetModel,onChange:a[0]||(a[0]=s=>i.$emit("update:targetModel",s.target.value))},[a[4]||(a[4]=e("option",{value:"all"},"All Models",-1)),(u(!0),c(S,null,w(d.targetModels,s=>(u(),c("option",{key:s,value:s},m(s),9,ne))),128))],40,oe),a[5]||(a[5]=e("div",{class:"select-arrow"},[e("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1))])]),e("div",ie,[a[9]||(a[9]=e("label",{for:"draftModel"},"Draft Model",-1)),e("div",de,[e("select",{id:"draftModel",value:d.selectedDraftModel,onChange:a[1]||(a[1]=s=>i.$emit("update:draftModel",s.target.value))},[a[7]||(a[7]=e("option",{value:"all"},"All Draft Models",-1)),(u(!0),c(S,null,w(d.draftModels,s=>(u(),c("option",{key:s,value:s},m(s==="None"?"Baseline (No Draft)":s),9,ue))),128))],40,ce),a[8]||(a[8]=e("div",{class:"select-arrow"},[e("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1))])]),e("div",pe,[a[12]||(a[12]=e("label",{for:"benchmark"},"Benchmark",-1)),e("div",fe,[e("select",{id:"benchmark",value:d.selectedBenchmark,onChange:a[2]||(a[2]=s=>i.$emit("update:benchmark",s.target.value))},[a[10]||(a[10]=e("option",{value:"all"},"All Benchmarks",-1)),(u(!0),c(S,null,w(d.benchmarks,s=>(u(),c("option",{key:s,value:s},m(s),9,ve))),128))],40,he),a[11]||(a[11]=e("div",{class:"select-arrow"},[e("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1))])]),e("div",ge,[a[14]||(a[14]=e("label",{for:"metric"},"Metric",-1)),e("div",me,[e("select",{id:"metric",value:d.selectedMetric,onChange:a[3]||(a[3]=s=>i.$emit("update:metric",s.target.value))},[(u(!0),c(S,null,w(d.metrics,s=>(u(),c("option",{key:s.value,value:s.value},m(s.label),9,ye))),128))],40,be),a[13]||(a[13]=e("div",{class:"select-arrow"},[e("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1))])])])]))}},ke=F(Me,[["__scopeId","data-v-91e1d201"]]),_e={class:"chart-wrapper"},$e={__name:"BenchmarkChart",props:{data:{type:Array,required:!0},benchmark:{type:String,default:"MTBench"},metric:{type:String,default:"throughput"}},setup(d){U([G,K,J,Z,Q,X,Y,ee]);const i=d,a=C(()=>{const s=i.benchmark==="all",o=s?["gsm8k","math500","mtbench","humaneval","livecodebench","financeqa","gpqa"]:[i.benchmark],p=i.metric==="accLen"?"accLen":"throughput",b=i.metric==="accLen"?"Acceptance Length":"Throughput (tokens/s)",y=i.metric==="speedup",M=i.data.filter(n=>o.some(f=>n.metrics[f]&&n.metrics[f][p]!=null)),_=[...new Set(M.map(n=>n.parallelConfig).filter(n=>n&&n!=="-"&&n!==null))],k=_.length>0?` (${_.join(", ")})`:"",l=[];let r=[];const t=n=>{const f=n?n.toLowerCase():"";return f.includes("specbundle")?{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#4f46e5"},{offset:1,color:"#4338ca"}]}:f.includes("eagle")?"#10b981":f==="-"||f==="none"||f.includes("baseline")?"#94a3b8":"#f59e0b"},v=n=>{if(n.draftModel==="-"||n.draftModel==="None"||n.draftModel.toLowerCase().includes("baseline"))return"Baseline (No Draft Model)";const h=n.draftModel.split("/").pop(),x=n.config==="0-0-0"||!n.config||n.config==="-"?"":n.config;return x?`${h}
(${x})`:h};if(s){r=o;const n=["#06b6d4","#8b5cf6","#ec4899","#f59e0b","#14b8a6","#f43f5e","#3b82f6","#84cc16"];let f=0;M.forEach(h=>{const x=v(h).replace(/\n/g," "),N=h.draftModel?h.draftModel.toLowerCase():"",E=N==="-"||N==="none"||N.includes("baseline");let T;N.includes("specbundle")?T={type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#4f46e5"},{offset:1,color:"#4338ca"}]}:E?T="#94a3b8":(T=n[f%n.length],f++);const j=o.map(L=>{const $=h.metrics[L]?.[p];if($==null)return 0;if(y){const z=h.baseline&&h.baseline[L]?h.baseline[L][p]:null;return z?parseFloat(($/z).toFixed(2)):0}return typeof $=="number"?parseFloat($.toFixed(2)):$});l.push({name:x,type:"bar",data:j,itemStyle:{borderRadius:[4,4,0,0],color:T},label:{show:!0,position:"top",fontSize:9,formatter:L=>{const $=L.value;return typeof $=="number"?$.toFixed(2):$},distance:2}})})}else{r=M.map(v);const n=M.map(f=>{const h=f.metrics[o[0]][p];if(y){const x=f.baseline&&f.baseline[o[0]]?f.baseline[o[0]][p]:null;return x?parseFloat((h/x).toFixed(2)):0}return typeof h=="number"?parseFloat(h.toFixed(2)):h});l.push({name:y?"Speedup":b,type:"bar",data:n,barMaxWidth:60,itemStyle:{borderRadius:[6,6,0,0],color:function(f){const h=f.dataIndex;return t(M[h].draftModel)}},label:{show:r.length<=15,position:"top",formatter:f=>{const h=f.value;return typeof h=="number"?h.toFixed(2):h},fontSize:10,color:"#64748b"}})}const g=s?`Hardware: H200 ${k} | Metric: Throughput (tokens/s)`:`${o[0]} Performance`;return{textStyle:{fontFamily:"Inter, sans-serif"},title:{text:g,left:"left",textStyle:{fontSize:16,fontWeight:600,color:"#1e293b"}},tooltip:{trigger:"axis",backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#e2e8f0",textStyle:{color:"#334155",fontSize:12},axisPointer:{type:"shadow"}},legend:{show:s,bottom:0,left:"center",width:"90%",itemGap:15,textStyle:{fontSize:11},data:s?l.map(n=>n.name):[]},grid:{left:0,right:10,bottom:100,top:60,containLabel:!0},xAxis:{type:"category",data:r,axisLine:{lineStyle:{color:"#e2e8f0"}},axisTick:{show:!1},axisLabel:{interval:0,rotate:s?0:30,fontSize:10,color:"#64748b"}},yAxis:{type:"value",name:y?"x Baseline":"",nameTextStyle:{align:"right",color:"#94a3b8"},splitLine:{lineStyle:{type:"dashed",color:"#f1f5f9"}},axisLabel:{color:"#64748b",fontSize:11}},dataZoom:[{type:"slider",show:!s&&r.length>8,start:0,end:s?100:Math.min(100,8/r.length*100),bottom:0,height:16,borderColor:"transparent",backgroundColor:"#f8fafc",fillerColor:"rgba(79, 70, 229, 0.1)",handleSize:"100%",handleStyle:{color:"#818cf8"}},{type:"inside",start:0,end:100,zoomOnMouseWheel:!1,moveOnMouseMove:!0,moveOnMouseWheel:!0}],series:l}});return(s,o)=>(u(),c("div",_e,[A(I(V),{option:a.value,autoresize:!0,style:{height:"100%",width:"100%"}},null,8,["option"])]))}},xe=F($e,[["__scopeId","data-v-787bd368"]]),Se={class:"table-container"},we={class:"table-scroll"},Be={key:0},Ce={class:"th-content"},Le={key:1},De={class:"model-name sticky-col"},Ae={class:"draft-model-cell"},Ne={class:"config-cell"},Te={key:0,class:"hardware-cell"},Fe={key:0,class:"metric-content"},Oe={class:"metric-pair"},ze={class:"val-acc"},qe={class:"val-thru"},Ee={key:0,class:"speedup-indicator"},je={key:1,class:"no-data"},Ie={key:1,class:"avg-speedup"},Pe={class:"speedup-tag primary"},We={__name:"BenchmarkTable",props:{data:{type:Array,required:!0},benchmarks:{type:Array,required:!0},selectedBenchmark:{type:String,default:"all"},highlightMetric:{type:String,default:"throughput"}},setup(d){const i=d,a=C(()=>i.selectedBenchmark==="all"?i.benchmarks:[i.selectedBenchmark]),s=C(()=>i.data.some(l=>l.hardware&&l.hardware!=="-"));function o(l){return l?l==="-"||l==="None"?"Baseline":l.includes("SpecBundle")?"SpecBundle":l.split("/").pop()||l:"-"}function p(l){return!l||l==="-"||l==="None"?"badge-baseline":l.includes("SpecBundle")?"badge-spec":l.toLowerCase().includes("eagle")?"badge-eagle":"badge-default"}function b(l){return l==null?"-":typeof l=="number"?l.toFixed(2):l}function y(l,r){return!l||!r||r===0?"-":(l/r).toFixed(2)}function M(l,r){if(!l||!r)return"";const t=l/r;return t>=2?"excellent":t>=1.5?"good":t>=1.1?"moderate":"neutral"}function _(l){let r=0,t=0;return l.baseline?(i.benchmarks.forEach(v=>{const g=l.metrics[v]?.throughput,n=l.baseline[v]?.throughput;g&&n&&n>0&&(r+=g/n,t++)}),t>0?(r/t).toFixed(2):"-"):"-"}function k(l,r){return!1}return(l,r)=>(u(),c("div",Se,[e("div",we,[e("table",null,[e("thead",null,[e("tr",null,[r[1]||(r[1]=e("th",{class:"sticky-col"},"Target Model",-1)),r[2]||(r[2]=e("th",null,"Draft Model",-1)),r[3]||(r[3]=e("th",null,"Config",-1)),s.value?(u(),c("th",Be,"Hardware")):D("",!0),(u(!0),c(S,null,w(a.value,t=>(u(),c("th",{key:t,class:"metric-header"},[e("div",Ce,[q(m(t)+" ",1),r[0]||(r[0]=e("span",{class:"th-subtitle"},"Acc Len / Tokens/s",-1))])]))),128)),d.highlightMetric==="speedup"?(u(),c("th",Le,"Avg Speedup")):D("",!0)])]),e("tbody",null,[(u(!0),c(S,null,w(d.data,(t,v)=>(u(),c("tr",{key:v},[e("td",De,[q(m(t.targetModel)+" ",1),r[4]||(r[4]=e("div",{class:"mobile-label"},"Target",-1))]),e("td",Ae,[e("span",{class:O(["component-badge",p(t.draftModel)])},m(o(t.draftModel)),3)]),e("td",Ne,m(t.config),1),s.value?(u(),c("td",Te,m(t.hardware),1)):D("",!0),(u(!0),c(S,null,w(a.value,g=>(u(),c("td",{key:g,class:O(["metric-cell-wrapper",{"highlight-bg":k()}])},[t.metrics[g]?(u(),c("div",Fe,[e("div",Oe,[e("span",ze,m(b(t.metrics[g].accLen)),1),r[5]||(r[5]=e("span",{class:"separator"},"/",-1)),e("span",qe,m(b(t.metrics[g].throughput)),1)]),t.baseline&&t.baseline[g]?(u(),c("div",Ee,[e("span",{class:O(["speedup-tag",M(t.metrics[g].throughput,t.baseline[g].throughput)])},m(y(t.metrics[g].throughput,t.baseline[g].throughput))+"x ",3)])):D("",!0)])):(u(),c("div",je,"-"))],2))),128)),d.highlightMetric==="speedup"?(u(),c("td",Ie,[e("span",Pe,m(_(t))+"x ",1)])):D("",!0)]))),128))])])])]))}},He=F(We,[["__scopeId","data-v-b070a3b9"]]);async function Re(){try{return await(await fetch("./raw_data/data.json")).json()}catch(d){return console.error("Error loading JSON data:",d),{}}}function Ue(d,i){if(!d||!i)return[];const a=new Map;return Object.entries(d).forEach(([,s])=>{const o=s.benchmark_name;(s.results||[]).forEach(b=>{const{batch_size:y,steps:M,topk:_,num_draft_tokens:k,metrics:l}=b,r=l.find(t=>t.Name==="Wihtout EAGLE3");l.forEach(t=>{const v=t.Name==="Wihtout EAGLE3",g=v?"baseline":`${y}-${M}-${_}-${k}`,n=v?"None":t.Name,f=`${n}|${g}`;a.has(f)||a.set(f,{targetModel:i,draftModel:n,config:g,batch_size:y,steps:M,topk:_,num_draft_tokens:k,metrics:{},baseline:{}});const h=a.get(f);h.metrics[o]={throughput:t.output_throughput,accLen:t.accept_length},r&&(h.baseline[o]={throughput:r.output_throughput,accLen:r.accept_length})})})}),Array.from(a.values())}function Ve(d){return Object.keys(d)}const Ge={class:"benchmark-app"},Ke={class:"main-container"},Je={class:"dashboard-controls"},Ze={key:0,class:"state-container"},Qe={key:1,class:"content-wrapper"},Xe={class:"stats-overview"},Ye={class:"stat-card"},et={class:"stat-value"},tt={class:"stat-card"},st={class:"stat-value"},at={class:"stat-card"},lt={class:"stat-value"},rt={class:"chart-section"},ot={class:"chart-container"},nt={class:"table-section"},it={key:2,class:"state-container empty"},dt={__name:"BenchmarkDashboard",setup(d){const i=B(!0),a=B({}),s=B("all"),o=B("all"),p=B("all"),b=B("throughput"),y=["gsm8k","math500","mtbench","humaneval","livecodebench","financeqa","gpqa"],M=[{value:"throughput",label:"Throughput (tokens/s)"},{value:"accLen",label:"Acceptance Length"},{value:"speedup",label:"Speedup vs Baseline"}],_=C(()=>Ve(a.value)),k=C(()=>{const r=a.value[s.value]||[];return[...new Set(r.map(t=>t.draftModel).filter(Boolean))]}),l=C(()=>{const r=a.value[s.value]||[];return o.value&&o.value!=="all"?r.filter(t=>t.draftModel===o.value):r});return P(s,r=>{r==="all"?o.value="all":k.value.includes(o.value)||(o.value="all")}),W(async()=>{try{const r=await Re();for(const[v,g]of Object.entries(r))a.value[v]=Ue(g,v);const t=Object.keys(a.value);t.length>0&&!t.includes(s.value)&&(s.value=t[0]),i.value=!1}catch(r){console.error("Error loading data:",r),i.value=!1}}),(r,t)=>(u(),c("div",Ge,[e("div",Ke,[t[12]||(t[12]=e("header",{class:"header"},[e("div",{class:"header-content"},[e("div",{class:"brand"},[e("img",{src:te,alt:"SpecBundle Logo",class:"main-logo"})])])],-1)),e("div",Je,[A(ke,{targetModels:_.value,selectedTargetModel:s.value,draftModels:k.value,selectedDraftModel:o.value,benchmarks:y,selectedBenchmark:p.value,metrics:M,selectedMetric:b.value,"onUpdate:targetModel":t[0]||(t[0]=v=>s.value=v),"onUpdate:draftModel":t[1]||(t[1]=v=>o.value=v),"onUpdate:benchmark":t[2]||(t[2]=v=>p.value=v),"onUpdate:metric":t[3]||(t[3]=v=>b.value=v)},null,8,["targetModels","selectedTargetModel","draftModels","selectedDraftModel","selectedBenchmark","selectedMetric"])]),i.value?(u(),c("div",Ze,[...t[4]||(t[4]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading benchmark data...",-1)])])):l.value.length>0?(u(),c("div",Qe,[e("div",Xe,[e("div",Ye,[t[5]||(t[5]=e("span",{class:"stat-label"},"Target Model",-1)),e("span",et,m(s.value==="all"?"All":s.value),1)]),e("div",tt,[t[6]||(t[6]=e("span",{class:"stat-label"},"Draft Models",-1)),e("span",st,m(k.value.length),1)]),e("div",at,[t[7]||(t[7]=e("span",{class:"stat-label"},"Configurations",-1)),e("span",lt,m(l.value.length),1)])]),e("div",rt,[t[8]||(t[8]=e("h3",null,"Performance Visualization",-1)),e("div",ot,[A(xe,{data:l.value,benchmark:p.value,metric:b.value},null,8,["data","benchmark","metric"])]),t[9]||(t[9]=e("div",{class:"config-legend"},"Config (batch_size - step - topk - nums_draft_tokens)",-1))]),e("div",nt,[t[10]||(t[10]=e("div",{class:"section-header"},[e("h3",null,"Detailed Results"),e("div",{class:"export-actions"})],-1)),A(He,{data:l.value,benchmarks:y,selectedBenchmark:p.value,highlightMetric:b.value},null,8,["data","selectedBenchmark","highlightMetric"])])])):(u(),c("div",it,[t[11]||(t[11]=H('<div class="empty-icon" data-v-8d9107a3><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-8d9107a3><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-8d9107a3></path><polyline points="14 2 14 8 20 8" data-v-8d9107a3></polyline><line x1="16" y1="13" x2="8" y2="13" data-v-8d9107a3></line><line x1="16" y1="17" x2="8" y2="17" data-v-8d9107a3></line><polyline points="10 9 9 9 8 9" data-v-8d9107a3></polyline></svg></div><h3 data-v-8d9107a3>No Data Available</h3>',2)),e("p",null,"No benchmark data found for "+m(s.value==="all"?"selected models":s.value),1)]))]),t[13]||(t[13]=e("footer",{class:"footer"},[e("p",null,"Powered by SpecForge Team")],-1))]))}},ct=F(dt,[["__scopeId","data-v-8d9107a3"]]),ut={id:"app"},pt={__name:"App",setup(d){return(i,a)=>(u(),c("div",ut,[A(ct)]))}};R(pt).mount("#app");
